{
  "query": "-- Migration 005: Business Management System\n-- Sistema de Gestão Empresarial Completo\n\n-- 1. TABELA DE PLANOS\nCREATE TABLE IF NOT EXISTS plans (\n  id SERIAL PRIMARY KEY,\n  name VARCHAR(50) NOT NULL UNIQUE,\n  display_name VARCHAR(100) NOT NULL,\n  description TEXT,\n  price_monthly DECIMAL(10,2) NOT NULL DEFAULT 0,\n  price_yearly DECIMAL(10,2) NOT NULL DEFAULT 0,\n  features JSONB NOT NULL DEFAULT '{}',\n  active BOOLEAN DEFAULT true,\n  created_at TIMESTAMP DEFAULT NOW(),\n  updated_at TIMESTAMP DEFAULT NOW()\n);\n\n-- Inserir planos padrão\nINSERT INTO plans (name, display_name, description, price_monthly, price_yearly, features) VALUES\n('free', 'Gratuito', 'Plano básico para começar', 0.00, 0.00, '{\"max_animals\": 50, \"ai_vision\": false, \"export\": false, \"history_days\": 30, \"cloud_backup\": false, \"priority_support\": false}'),\n('premium', 'Premium', 'Plano completo para produtores profissionais', 29.90, 299.00, '{\"max_animals\": null, \"ai_vision\": true, \"export\": true, \"history_days\": null, \"cloud_backup\": true, \"priority_support\": true}'),\n('enterprise', 'Enterprise', 'Plano para grandes fazendas e cooperativas', 99.90, 999.00, '{\"max_animals\": null, \"ai_vision\": true, \"export\": true, \"history_days\": null, \"cloud_backup\": true, \"priority_support\": true, \"multiple_farms\": true, \"multiple_users\": true, \"api_access\": true, \"custom_reports\": true}')\nON CONFLICT (name) DO NOTHING;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3z7bLMrwyjabB4f.8e4de514c0a1 --database JBahLkqrjSK5Uhr432apoy --execute -- Migration 005: Business Management System\n-- Sistema de Gestão Empresarial Completo\n\n-- 1. TABELA DE PLANOS\nCREATE TABLE IF NOT EXISTS plans (\n  id SERIAL PRIMARY KEY,\n  name VARCHAR(50) NOT NULL UNIQUE,\n  display_name VARCHAR(100) NOT NULL,\n  description TEXT,\n  price_monthly DECIMAL(10,2) NOT NULL DEFAULT 0,\n  price_yearly DECIMAL(10,2) NOT NULL DEFAULT 0,\n  features JSONB NOT NULL DEFAULT '{}',\n  active BOOLEAN DEFAULT true,\n  created_at TIMESTAMP DEFAULT NOW(),\n  updated_at TIMESTAMP DEFAULT NOW()\n);\n\n-- Inserir planos padrão\nINSERT INTO plans (name, display_name, description, price_monthly, price_yearly, features) VALUES\n('free', 'Gratuito', 'Plano básico para começar', 0.00, 0.00, '{\"max_animals\": 50, \"ai_vision\": false, \"export\": false, \"history_days\": 30, \"cloud_backup\": false, \"priority_support\": false}'),\n('premium', 'Premium', 'Plano completo para produtores profissionais', 29.90, 299.00, '{\"max_animals\": null, \"ai_vision\": true, \"export\": true, \"history_days\": null, \"cloud_backup\": true, \"priority_support\": true}'),\n('enterprise', 'Enterprise', 'Plano para grandes fazendas e cooperativas', 99.90, 999.00, '{\"max_animals\": null, \"ai_vision\": true, \"export\": true, \"history_days\": null, \"cloud_backup\": true, \"priority_support\": true, \"multiple_farms\": true, \"multiple_users\": true, \"api_access\": true, \"custom_reports\": true}')\nON CONFLICT (name) DO NOTHING;",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 5: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 8 column 17 near \"JSONB NOT NULL DEFAULT '{}',",
    "  active BOOLEAN DEFAULT true,",
    "  created_at TIMESTAMP DEFAULT NOW(),",
    "  updated_at TIMESTAMP DEFAULT NOW()",
    ")\""
  ]
}